# FLA-project 实验报告

洪睿琦 201502002



## 一、分析与设计思路

本次实验采用了课程群中提供的框架，可以使用助教提供的方法在Linux环境下进行编译并且在bin目录下得到可执行文件`turing`。



在turing-project目录下，包含了本次实验的源代码，具体为：Tape类（Tape.h/Tape.cpp）、TM类（TM.h/TM.cpp），以及main.cpp。



下面对这些模块的设计进行解释：

### Tape类

这个类主要对图灵机中的双向、无限长的纸带结构以及其读写头进行了封装。并且提供了初始串的装载、磁头移动、磁头的读取和改写以及对当前纸带的状态快照进行输出（用于工具的verbose模式）等方法。

根据图灵机中纸带的性质，我认为双向链表将是用于实现Tape类的数据结构。于是Tape类的核心数据结构为STL提供的list，而磁头即为一个list的双向迭代器。



### TM类

这个类即为本次实验的核心类，其用来模拟一个图灵机。其内部内置了用于描述一个图灵机的所有集合（状态集、输入符号集、纸带符号集、终结状态集 F）以及迁移函数。可以使用TM类对象的load方法对一个`.tm`文件进行简单的语法分析，并读入上述状态。除此之外，还有用于模拟图灵机运行的纸带以及当前状态，可以通过set_input方法进行读入，这个过程将先对待读入串是否均在输入符号集进行分析，若合法，将其加载到第一个纸带上，并将空串加载到别的纸带上。

上述一切就绪后，调用TM类的run方法，可以对图灵机运行过程进行模拟，这个过程将循环调用私有的step方法，对图灵机状态进行转移并打印（在verbose模式下），直到运行到一个接收状态或者停机。此时将会把第一条纸带上的信息输出，作为图灵机的运行结果。



### main.cpp

主程序，主要进行了命令行工具的实现。同时部署了一个TM类实例，对运行结果进行模拟。



## 二、实验完成度

完成了本次实验的全部三个任务，并且对程序的正确性进行了一定的测试，应该具有较高的完成度。



## 三、实验中遇到的问题及解决方案

本次实验过程遇到的主要挑战是从文件中读入图灵机以及迁移函数的实现。

对于前者，因为C++提供了较少的字符串方法，因此TM类的load方法的实现比较naive，占用了较多了代码行数。（而且很可能是一个bug来源）解决方法即为细心细心再细心，防止有bug出现。

对于后者，综合了实现难度和效率的考虑，选择了一个嵌套map的方法来实现迁移函数。实现的细节可以详见代码。



## 四、总结感想

本次实验较大程度上锻炼了我C++面向对象编程的能力，也丰富了我对图灵机的理解和图灵机设计的能力。写出图灵机并在上面跑程序也非常有意思，是一次很有意义的实验！



## 五、对课程和实验的意见与建议

blgg永远的神！